<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- Copyright (c) 2007, Stuart McGraw -->
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>JMdict To-Do List</title>
  <style type="text/css">
    .gendate	{font-size: 80%; }
    .header	{background: #000000; color: #FFFFFF; } 
    .priohdr	{background: #FF4040; } 
    .cmplhdr	{background: #00D4E0; } 
    .done	{background: #E0E0E0; } 
    .row	{background: #D0D0FF; }
    .title	{font-style: bold; }
    .
    </style>
  </head>
<body>
  <h1>JMdictDB To-Do List</h1>
  <span class="gendate">
    This list was current as of 2007-08-03 17:13
    </span>
  <table class="todo">
    
    <span omit-tag="">
      
      <tr class="header">
	<td>Id</td>
	<td colspan="2">Title / Description</td>
	<td>Completed date </td>
	<td>Entered date</td>
	</tr>
      <tr class="priohdr">
        <td colspan="5">Priority 'high' items</td>
	</tr>
      <tr class="row">
	<td class="id">83</td>
	
	  <td class="title" colspan="2">brackets in reading cause parse error</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-07-28 00:47</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">The following text (which occurs in one of my mnn17 flash card entries) causes a jbparser parse error when included in the "reading" section of an edit submission:<br/>
  ［おふろに］はいります<br/>
Problem seems to be the brackets which are classified as kanji characters and thus make the whole string a kanji string and illegal in the reading section.
</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="notes" colspan="4">See also task-26: "Kana-kanji determination".
</td>
	</tr>
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">72</td>
	
	  <td class="title" colspan="2">Handle duplicate tags in jbparser.yp</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-06-17 14:20</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">In the JEL language parsed by jbparser, tags can be used in brackets without spectifying their type if they are not ambiguous.  Currently no check is made (parser uses first one found).  Need to fix this.<br/>
- When parser is looking for a sense tag, it should not consider same tag in, say, KINF, to be ambiguous.  I.e. lookup_tag() function needs to take an argument limiting scope.<br/>
- Parser should exclude obsolete tags (id&gt;200) when considering ambiguity.<br/>
- After taking above considerations into account, should return a "is ambiguous" code when tag is ambiguous.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">69</td>
	
	  <td class="title" colspan="2">seq/src in urls</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-06-17 13:04</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">cgi scripts and other scripts (eg showentr.pl) use seq numbers to identify entries but seq numbers are ambiguous without the src id.  Need to adopt a syntax that allows both seq number and src id (qqqqqqq/ss?), and change current uses of seq number to support it.
</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="notes" colspan="4">Changes needed in:<br/>
+ perl/showentr.pl<br/>
+ perl/cgi/srchform.pl<br/>
could add src dropdown near the entr-id/seq box, or just make the form pay attention to the Src checkbox selections when seq# given.<br/>
+ per/cgi/edsubmit.pl<br/>
+ Anything else then uses seq in link to entr.pl page.
</td>
	</tr>
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">37</td>
	
	  <td class="title" colspan="2">Simplify search subs</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-26</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">srchres.pl -- Simplify build_search_table() and mk_from_clause().  Because of the 2007-02-11 pk/fk change, we don't need join all the parent tables of the table we're looking at -- the search target table can be joined directly and soley to "entr" which should greatly simplify the code.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">39</td>
	
	  <td class="title" colspan="2">Multiple rdng/kanj tags displayed</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-26</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">If a reading (or kanji) has a the same FoU tag paired with two (or more) kanji (or readings), the tag will be shown twice (or more) on the reading  (or kanji).  Example: seq 1579780 (主人).
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">35</td>
	
	  <td class="title" colspan="2">Case insensitive search</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-24</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">srchres.pl -- Search on gloss is case-sensitive, probably should not be.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">2</td>
	
	  <td class="title" colspan="2">Paged results</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">Need to limit number entries shown on "search results" page to some reasonable number to prevent trying to display huge results sets.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">3</td>
	
	  <td class="title" colspan="2">Edit entry page</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">Need page that allows user to submit modifcations of existing entries.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">5</td>
	
	  <td class="title" colspan="2">Master file generation</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">Write a script to generate Jim Breen's master file (used to generate in turn the various JMdict and Edict files) from the database.
</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="notes" colspan="4">Being worked on by Jim [2007-07-26].
</td>
	</tr>
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">12</td>
	
	  <td class="title" colspan="2">Modperl</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">Support Apache/modperl.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">1</td>
	
	  <td class="title" colspan="2">Approval process flow</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">Need to work out details of approval process in terms of data changes and the web pages needed to support those changes. [Need "edit entry" page first]
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      <tr class="priohdr">
        <td colspan="5">Priority 'med' items</td>
	</tr>
      <tr class="row">
	<td class="id">86</td>
	
	  <td class="title" colspan="2">Add src column to xresolv</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-08-01 21:30</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">table xresolv is used to hold the raw xrefs from files jmdict and examples (and others in future) as the xrefs are read, since they cannot be resolved immediately.  The table should be able to, and currently does, hold xrefs from various files simultaneously.  But the only thing that distinguishes xrefs from different fies currently is the 'typ' field (2 or 3 from jmdict, 5 for Examples).<br/>
<br/>
Need to add new column 'src' to xresolv, and modify jmparse.pl, exparse.pl, and their modules to provide value for it.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">76</td>
	
	  <td class="title" colspan="2">Natural key for entries</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-07-13 15:50</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">Entr rows currently use a surrogate primary key (auto-number int id column) but has not other way of uniquely identifying entries.  This is a problem when exporting/importing entries, or moving them between databases since there is no way to identify the target of inter-entry reference (xrefs for example) sinve the entry id may change on being reloaded.
</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="notes" colspan="4">We can't use (src,seq) as a pk because multiple copies of the same entry can exist with different or the same stat values (e.g. there can be several "updated, approval pending" versins of the same entry).<br/>
<br/>
Option: add a version number (small int) field to entr, say 'entr', to distinguish between otherwise indistinguishable entries, and make unique key (src,seq,entr).  Don't really want it to be the PK becaue it will make children table PK's too long.
</td>
	</tr>
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">71</td>
	
	  <td class="title" colspan="2">Add fields in hist table</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-06-17 13:11</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">Currently we combine the user and email fields on submissions forms and write to column 'user' in the hist table.  Similarly with fields "comments" and "references".  All of these items should go into their own columns in table hist.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">13</td>
	
	  <td class="title" colspan="2">Perlex</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-05-04 18:41</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">Support PerlEx.  The author does a lot of the project development on a Windows machine and would like faster response both during devopment and for his own use of the project.  It would also be in keeping with the free-software nature of the project to make the software useful to the widest possible audience.<br/>
<br/>
PerlEx comes with Activestate's Perl and provides fast execution of cgi scripts under Microsoft's IIS web server in (I think) a similar way to modperl's Modperl::Request.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">40</td>
	
	  <td class="title" colspan="2">Srchform reset button</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-27</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">Add reset button to search results form.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">10</td>
	
	  <td class="title" colspan="2">Loaded data validation</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-26</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">Need to find way to validate that db contents are same as jmdict.xml.  Just generating xml from database and diffing with original file probably won't work because we don't maintain same order of entities, comment positions, and parhaps other things.  xref targets won't be identical.<br/>
<br/>
Maybe this could be done by generating a master file and letting Jim Breen do the validation against the current master file?
</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="notes" colspan="4">Being worked on by Jim [2007-07-26].
</td>
	</tr>
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">36</td>
	
	  <td class="title" colspan="2">Suppress rev xrefs when same as forward</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-25</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">entr.pl -- If there is cross-ref and a reverse-ref to the same target in a sense, mark the cross-ref (with an astrisk or something) to indicate the existance of the reverse reference, rather that displaying the full reverese refernce which duplicates the text in the cross-ref and looks confusing.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">34</td>
	
	  <td class="title" colspan="2">Dbopen remote host</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-24</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">jmdict.pm::dbopen() -- when reading jmdict.cfg, look for and use a remote host name.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">6</td>
	
	  <td class="title" colspan="2">Editor authenication</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">Authentication for editors.  (work out process flow details first?)
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">15</td>
	
	  <td class="title" colspan="2">Query time</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">Even .8s seems a little slow (even for my machine).  DB interface code uses DBI's fetch_hash methods.  I think this may need to a second db read in order to determine the column names. Need to determine: 1) Is that ttrue?  2) Does it account for a significant performace hit? Will is still be a problem running with modperl which will improve query caching?  If these are true then rewrite code so that we provide the column name info rather than reading from db.
</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="notes" colspan="4">Not sure when it happened (possibly as result of elimination of surrogate PKs in child tables) but object load times reported on the entr.pl page are now typically less the .3s on my development machine.
</td>
	</tr>
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">30</td>
	
	  <td class="title" colspan="2">XML parse other checks</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">load_jmdict.pl -- Do other error checking (or could do these after data loaded into db): all senses have gloss?  All entries have sens and reading? ... (But remember that deleted entries have no sences or readings).
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">4</td>
	
	  <td class="title" colspan="2">Editor search page</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">Search by various history criteria: status / submitter / submitted date / text in comments / etc.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">25</td>
	
	  <td class="title" colspan="2">Untrusted storables</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">newsub.pl -- Is it safe to receive a Storable?
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">29</td>
	
	  <td class="title" colspan="2">XML parse kw checks</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">load_jmdict.pl -- Check result of kw lookups, complain when not found (may need to build entry struct, and only write to files when complete which will allow skipping entries with problems.)
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">26</td>
	
	  <td class="title" colspan="2">Kana-kanji determination</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">jmdict.pm -- The database expects text strings in table "rdng" to contain no kanji chars and in table "kanj" to contain at least one.  Function jstr_classify used to determine kana/kanji-ness.  However there are some jmdict items that have kanji text that jmdict::jstr_classify considers to be kana only.  Change jstr_classify?  Or do something else?
</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="notes" colspan="4">See also task-83: "brackets in reading cause parse error".
</td>
	</tr>
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">31</td>
	
	  <td class="title" colspan="2">Order index convention</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">jmdict, *.pl -- Decide on policy re ord numbers and list indexes:  In EntrList struct, many things (eg rdng records) have both a "rdng" key and a index in list.  Some places we (eg showentr.pl filt() calls) we take the key number as definitive, other places (jmdict::addentr()) we take the index position as definitive.  Currently no problem because the two numbering methods are consistent but may be future operations that make them inconsistent which will  introduce bugs.  Should adopt some standard rules to control this?
</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="notes" colspan="4">Current (2007/07/25) policy:<br/>
When writing entry structure, all ord numbers are regenerated based on list position.  Existing number in records are overwritten.  (Done by jmdict::setkeys()).<br/>
<br/>
When read in, jmdict::EntrList() will make sure (by appropriate use of ORDER clause in SQL) that list positions and numbers agree.  <br/>
<br/>
Modifiers of entr objects are resposible for maintaining consistency or documenting when not maintained.<br/>
<br/>
Dual parented records (freq, restr, stagr, stagk, xref) will be linked to both of their parent records.<br/>
<br/>
Entr objects being created for output need not supply record numbers.  User of object responsible for checking index number presence/absense if it needs them.
</td>
	</tr>
      
      </span><span omit-tag="">
      
      
      <tr class="priohdr">
        <td colspan="5">Priority 'low' items</td>
	</tr>
      <tr class="row">
	<td class="id">79</td>
	
	  <td class="title" colspan="2">Load jmdict et.al. into staging database</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-07-24 22:48</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">Although the most time consuming part of the load proces (downloading thefiles, parsing them, and rebasing the id numbers) are down without touching any existing active jmdict database, loading the data into Postgresql is done on the active "jmdict" databaseand takes from about <br/>
1.5 minutes on Arakawa for just the jmdict xml file, to 30+ minutes on  my slow machines for the full (jmdict,jmnedict,examples) set.<br/>
<br/>
To minimize impact to other users, might be better to loading into a database other than"jmdict", and after the load is successful, rename or drop the old jmdict db, and rename the new one to "jmdict".<br/>
<br/>
I think this is a ./Makefile change along with changing any hardwired "jmdict" database names used in the pg/*.sql files.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">78</td>
	
	  <td class="title" colspan="2">Change "Src" to "Corp"</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-07-24 16:39</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">In all the UI's and doc, change references to "src" (from "entry source") to "corp" (for "corpus").  Reason is that when adding a new entry to an existing "src" like JMdict, it seems odd to think of the new entry's "source" as jmdict -- since it is new it is not in the jmdict entries yet so how can jmdict be its "source"?  Calling it a corpus seems more accurate.<br/>
<br/>
May also want to change code variable names and database identifiers (columns, tables, etc.)
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">77</td>
	
	  <td class="title" colspan="2">Stop using magic number keyword values</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-07-13 16:53</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">Currently we use the hack of using values &gt;200 is the kw* tables to indicate that the kw is obsolete.  Some programs print warning messages when they encounter such keywords.  This is a hack and needs to be fix by adding a boolean "obsol' column to the keyword tables.<br/>
<br/>
There are some other similar cases:<br/>
kwmisc -- Uses 1xx value keywords for jmnedict tags.  I don't think any programs make use of that coding though.<br/>
kwpos -- Uses 3xx value keywords for extra PoS types used by experimental verb inflection stuff.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">73</td>
	
	  <td class="title" colspan="2">lit glosses w nested parens parsed wrong</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-06-17 19:22</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">In jmparse.pl, function extract_lit() uses the regex "/(lit:[^)]+)/ to extract the literal text.  But it appears that some such glosses contain parens as part of the lit text so the above pattern recognises it incorrectly.  For example, 2149180 (行ってまいります), has the gloss: "So long (lit:"(I'm) going and coming back")".
</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="notes" colspan="4">Since this is a temp hack until JB decides on an xml representation, it may not be worth spending much time on this.  Perhaps we could generate a warning and do manual fixup later since there probably aren't too many of these.
</td>
	</tr>
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">38</td>
	
	  <td class="title" colspan="2">TAL whitespace</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-26</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">entr.tal, and probably others does not have very good control over whitespace.  For example, there is a space after the opening bracket of a FoU tag (e.g. ichi1)  but no space before the closing bracket.  If these templates get a life beyond development, need to go through them and fix whitespace.
</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="notes" colspan="4">Elimination of unwanted whitespace can be done by breaking the lines in the html inside tags, ie <br/>
  &lt;xxx&gt;foo&lt;/xxx&gt;<br/>
  &lt;yyy&gt;:&lt;/yyy&gt;<br/>
becomes<br/>
  &lt;xxx&gt;foo&lt;/xxx<br/>
  &gt;&lt;yyy&gt;:&lt;/yyy&gt;<br/>
See the lsrc section of perl/lib/tal/entr.tal-1.12 for example.
</td>
	</tr>
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">7</td>
	
	  <td class="title" colspan="2">Unit tests</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">Need to write unit tests for library code
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">8</td>
	
	  <td class="title" colspan="2">Functional tests</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">For cgi pages, command scripts, etc.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">23</td>
	
	  <td class="title" colspan="2">CGI security audit</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">cgi -- Do security audit of all pages.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">9</td>
	
	  <td class="title" colspan="2">Test environment</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">Need to setup a test infrastructure.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">14</td>
	
	  <td class="title" colspan="2">Query time variation</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">Retrieving one or a set of jmdict entries involves executing ~20 sql select stements.  This takes anwhere from .8 to 30s on my (slow) development machine.  I don't understand this almost order-of-magnitutde variation.  Need to determine what's going on and find remedy.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">16</td>
	
	  <td class="title" colspan="2">Connection pooling</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">Will this help performance? Informal timings done on cgi show that connect time is pretty quick but may be more significant when object retrieval times are improved. (ref Apache::DBI)
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">18</td>
	
	  <td class="title" colspan="2">CSS cleanup</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">*.tal,entr.css -- The .css file is a mess.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">19</td>
	
	  <td class="title" colspan="2">CGI error handling</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">cgi -- Better error handling for db and other errors.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">22</td>
	
	  <td class="title" colspan="2">UTC datetimes</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">Check the everything storing a datetime value stores it in UTC or localtime with timezone.  Check that everything displaying a datetime does the same.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">21</td>
	
	  <td class="title" colspan="2">CGI html escaping</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">cgi -- Need a coherent approach to escaping html entities.  When/what/where to escape html entities?  currently some stuff gets double escaped or not escaped at all.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">28</td>
	
	  <td class="title" colspan="2">Circular lists</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">jmdict.pm -- The xrefs stuff might be circularly linked.  How does that affect garbage collection in long-running process (e.g. modperl)?
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">33</td>
	
	  <td class="title" colspan="2">DB maintenance</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">database -- write maintenance scripts to check for things that are hard to write contraints for: do all senses have at least one gloss?  do all (jmdict) entries have at least one sense and reading?, Are rdng,kanj,sens,gloss ord numbers consecutive?
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">27</td>
	
	  <td class="title" colspan="2">Database versioning</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">kwstatic.pm -- Provide way for caller to check name/version of database used.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      <tr class="priohdr">
        <td colspan="5">Priority 'info' items</td>
	</tr>
      <tr class="row">
	<td class="id">20</td>
	
	  <td class="title" colspan="2">CGI form post</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">cgi -- At some point change GET form methods to POST.  (GET useful for debugging.)
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">24</td>
	
	  <td class="title" colspan="2">Segregate sql code</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">perl -- Isolate all sql in library routines?
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">41</td>
	
	  <td class="title" colspan="2">CVS access</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">Allow anyone anonymous read-only access to cvs repo via cvsweb, viewcvs, or similar.<br/>
[CVS dir structure needs to settle down first.  Need reliable host since that repo will become primary repository.]
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row">
	<td class="id">32</td>
	
	  <td class="title" colspan="2">Email addr obsfucation</td>
	  
	
	<td class="compld"></td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr">
        <td> </td>
	<td class="descr" colspan="4">cgi -- Need to obsure email addresses for general display (unobsured on conf form ok if none other than submitter/authenticated editors can see.)
</td>
	</tr>
      
      
      </span><span omit-tag="">
      <tr class="header">
        <td colspan="5"><br>The following items have been completed...<br><br></td>
	</tr>
      
      
      <tr class="row done">
	<td class="id">74</td>
	
	
	  <td class="title">Xrefs lost after edit submission</td>
	  <td class="prio">crit</td>
	  
	<td class="compld">2007-08-03 16:28</td>
	<td class="entered">2007-06-17 19:58</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="descr" colspan="4">Xrefs present in an edit submission (e.g. a "[see=...]" item in a sense) appear in the confirmation form but not in the new/edited entry created from the submission.
</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="notes" colspan="4">Using debugger, noted that the entr structure created in edsubmit.pl has a erefs substrucure, but no xrefs records.  This seems likely the cause.<br/>
<br/>
This was fixed in the changes to xref handling made in changeset 23.
</td>
	</tr>
      
      </span><span omit-tag="">
      
      
      
      <tr class="row done">
	<td class="id">85</td>
	
	
	  <td class="title">use headwords in word summaries</td>
	  <td class="prio">high</td>
	  
	<td class="compld">2007-08-03 16:28</td>
	<td class="entered">2007-07-30 17:18</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="descr" colspan="4">Currently word summary lists that use view "esum" or similar (as occur in the search results page or the xref lists), show all the kanji and all the readings for the word.  Want to change so that only the first reading and or first kanji are shown.  This will make the summary line more concise and is consistent with jmdict's use of kanji/reading pairs to identify entries is xrefs.
</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="notes" colspan="4">Fixed in changes of changeset 23.
</td>
	</tr>
      
      </span><span omit-tag="">
      
      
      
      <tr class="row done">
	<td class="id">81</td>
	
	
	  <td class="title">Missing xrefs</td>
	  <td class="prio">crit</td>
	  
	<td class="compld">2007-07-29 19:45</td>
	<td class="entered">2007-07-26 10:08</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="descr" colspan="4">Reported by Jim Breen via email, 2007/07/26 00:37<br/>
&gt; 2163180 has xrefs to 謹啓 and 粛白. showentr.pl only reports <br/>
&gt; the one to 粛白.<br/>
Actually 粛白 is a reverse reference.  Both the forward xrefs are missing.
</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="notes" colspan="4">Will wait until the completion of taskid-80 ("Ordered xrefs") since the changes made for that could fix or expose the cause of this problem.<br/>
<br/>
After taskid-80, the missing xrefs now appear in showentr.pl and entr.pl web page output.  Don't know why they were missing before.  Note that the process that resolves the xrefs is hueristic and may not resolve everything correctly.  <br/>
<br/>
There are still 6 known entries with unresolved xrefs because the resolver could not identify a unique target.  Documented in 2007/07/29 email to Jim Breen.
</td>
	</tr>
      
      </span><span omit-tag="">
      
      
      
      <tr class="row done">
	<td class="id">82</td>
	
	
	  <td class="title">Ordered xrefs</td>
	  <td class="prio">high</td>
	  
	<td class="compld">2007-07-29 19:45</td>
	<td class="entered">2007-07-26 10:29</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="descr" colspan="4">In email (2007/07/26 00:37) Jim Breen points out that the xrefs should be ordered:<br/>
&gt; 2163220 has xrefs to イケメン and 普通 (in that order) [but showentr.pl <br/>
displays them in the reverse order].<br/>
&gt; (it might be a pain, but I think the JMdict order should be maintained.)<br/>
<br/>
Two ways to do:<br/>
1) Add new smallint column "xref" to table xref, and make part of PK (entr,sens,xref).  This is exactly analogous to how order is done by the other tables (rdng, kanj, sens, gloss).<br/>
<br/>
2) Leave current PK alone and add an order column to be populated from the xresolv "order" column.  Because each xresolv row can expand to multiple xref rows, the xref order column may get dup values for the same source entr,sens.
</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="notes" colspan="4">Implemented option 1).  Notes:<br/>
<br/>
Difficulty in assigning column "xref" values during load from xml data.  The data for that load is generated by a SQL select statement and it is hard to generate the xref values in the select.  (Not a problem for rdng,sens,etc because those  have order values created by perl durning the xml parsing.)  Because each insert cause the trigger to do a SELECT MAX(...) it could be pretty slow when inserting a large number of xrefs (such as will happen when we resolve the Examples file xrefs).  Based on the time taken to insert the 3000 jmdict xrefs, estimate 1M examples file xrefs will take about 1.5 hr on my machine.
</td>
	</tr>
      
      </span><span omit-tag="">
      
      
      
      <tr class="row done">
	<td class="id">84</td>
	
	
	  <td class="title">Makefile gunzip command fails on Windows</td>
	  <td class="prio">med</td>
	  
	<td class="compld">2007-07-29 19:45</td>
	<td class="entered">2007-07-28 22:49</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="descr" colspan="4">Makefile version 1.20 started failing on gunzip command in the jmdict.xml section.  Get message about file not found (not sure what file but message implies problem has to do with space character in path name.)  In Makefile-1.21 I changed the gunzip command to "sh gunzip ..." which fixes problem on Windows but breaks on unix.
</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="notes" colspan="4">Problem was Windows Cygwin gunzip is now a shell script that runs as gunzip ok in cygwin shell, but requires explicit sh invocation when run in Windows outside of Cygwin shell.  However on Unix machines "sh gunzip ..." fails because gunzip is an executable, not a shell script.
</td>
	</tr>
      
      </span><span omit-tag="">
      
      
      
      <tr class="row done">
	<td class="id">68</td>
	
	
	  <td class="title">Finish move of resolv_xref() to jmdict module</td>
	  <td class="prio">med</td>
	  
	<td class="compld">2007-07-29 19:45</td>
	<td class="entered">2007-06-14 13:46</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="descr" colspan="4">Change id {97} created a near duplicate of jmdictcgi::resolv_xref() in module jmdict.  Need to change jmdictcgi to call the jmdict version rather than continuing to use its own local version.
</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="notes" colspan="4">xresolv_xref() was removed from jmdictgci:: in chgid-145.  It was used only by obsolete new entry and edit entry form prior to adoptation of current jbparser ones.
</td>
	</tr>
      
      </span><span omit-tag="">
      
      
      
      <tr class="row done">
	<td class="id">17</td>
	
	
	  <td class="title">Newsub.pl warnings</td>
	  <td class="prio">med</td>
	  
	<td class="compld">2007-07-29 19:45</td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="descr" colspan="4">nwsub.pl -- generating warnings that DB::OUT is not used.  Creates noise in web server log files.
</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="notes" colspan="4">nwsub.pl was renamed to edsubmit.pl
</td>
	</tr>
      
      </span><span omit-tag="">
      
      
      
      <tr class="row done">
	<td class="id">11</td>
	
	
	  <td class="title">Design docs</td>
	  <td class="prio">med</td>
	  
	<td class="compld">2007-07-29 19:45</td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="descr" colspan="4">Need an overall Design and Implementation docs
</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="notes" colspan="4">I think the schema.odt and .dia files, code comments, the tutorial files, and the Task/Changelog lists, satisfy this task, at least for now.
</td>
	</tr>
      
      </span><span omit-tag="">
      
      
      
      <tr class="row done">
	<td class="id">80</td>
	
	
	  <td class="title">Missing restr records for "no_kanji" readings</td>
	  <td class="prio">crit</td>
	  
	<td class="compld">2007-07-25 23:00</td>
	<td class="entered">2007-07-24 23:56</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="descr" colspan="4">Reported by Jim Breen, email, 2007/07/24 23:56:<br/>
&gt; I can't get get the "re_nokanji" result. When I put in <br/>
&gt; an entry with re_nokanji indicated (e.g. #1216680) nothing<br/>
&gt; happens. I put in a diagnostic printout of the restr<br/>
&gt; list and it appears to be empty.
</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="notes" colspan="4">Fixed in chgid 142.
</td>
	</tr>
      
      </span><span omit-tag="">
      
      
      
      <tr class="row done">
	<td class="id">70</td>
	
	
	  <td class="title">jmdict::get_seq only work for jmdict seq numbers</td>
	  <td class="prio">high</td>
	  
	<td class="compld">2007-07-25 23:00</td>
	<td class="entered">2007-06-17 13:08</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="descr" colspan="4">When adding new entries, jmdict:;add_entr() call jmdict::get_seq() to get a new sequence number but the latter fuction returns only jmdict seq numbers.  Need to figure out how to generate new seq numvers for other sources, and make get_seq() support them.
</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="notes" colspan="4">Added an new column 'seq' to table kwsrc that names the sequence to be used when assigning default seq values to new 'entr' rows. <br/>
Added an insert trigger to table 'entr' to assign 'seq' value from appropriate sequence when not explicitly given in the INSERT statement.<br/>
Also updated syncseq to update the new sequences.<br/>
Don't use jmdict::get_seq() to provide a default value any more, just leave 'seq' NULL and rely on the trigger to insert the right value.<br/>
<br/>
Problems:<br/>
<br/>
May need create new sequences when new src's added.  (E.g. if a second version of jmdict is added, need a new sequence to supply its default seq numbers.)<br/>
<br/>
If entr.src is changed, also need to check the entr.seq has an appropriate value. (This is standard side-effect of unnormalized design.)<br/>
<br/>
Trigger may significantly slow down inserts? (But insert rate normally expected to be low wnough that this should not be problem in practice.  High volume inserts done via COPY.)
</td>
	</tr>
      
      </span><span omit-tag="">
      
      
      
      <tr class="row done">
	<td class="id">75</td>
	
	
	  <td class="title">use fixed entr.id's in .pgi files</td>
	  <td class="prio">high</td>
	  
	<td class="compld">2007-07-13 17:19</td>
	<td class="entered">2007-07-12 19:32</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="descr" colspan="4">Currently we allow loading data from different sources by generating intemediate .pgi files that have symbolic entr.id numbers which are assigned real values (which depend upon what is already in the database) when the file is processed into a .dmp file by jmload.pl.<br/>
<br/>
This requires the .pgi file contain the specially formatted symbolic entr.id numbers which only the file loader programs know how to produce and jmload.pl knows how to convert to fixed values.<br/>
<br/>
I wanted to extract some entries from one database a load into a different database but that requires converting the entr.id numbers in to the symbolic form used by jmload.pl.<br/>
<br/>
We could have the loader programs generate fixed entr.id numbers and tell jmload.pl where the entr.id values are in the table data and let it adjust them without requiring the special symbolic form.  This will allow jmload.pl to work with any postgresql dump file.  Disadvantage is that this will make jmload.pl yet another piece of code that needs to be updated when a schema change occurs.
</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="notes" colspan="4">jmdictpgi::wrentr() modified to write fixed entr.id numbers and since all the loader programs (currently jmparse.pl, exparse.pl) use this funtion for output, yjey all now generate fixed rather than symbolic entrid's.<br/>
<br/>
jmload.pl modified so that it knows what columns in each table contain entr.id numbers, and it will rebase those columns.  This allows it to work with any postgresql dump file that contains table data from those tables as well as the output of jmparse.pl and exparse.pl.<br/>
<br/>
However, it doesn't really handle xref table data well.  It allows the rebasing to be limited to a specific range of entr.id values and if the xref entr.id values are in that range they are rebased.  Otherwise they are left unchanged.  About as good as we can do until we have a entr.id-independent way of refering to entries (see task id 76).
</td>
	</tr>
      
      </span><span omit-tag="">
      
      
      
      <tr class="row done">
	<td class="id">66</td>
	
	
	  <td class="title">Examples file syntax change</td>
	  <td class="prio">high</td>
	  
	<td class="compld">2007-06-08 20:00</td>
	<td class="entered">2007-06-01 09:38</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="descr" colspan="4">The Examples file now marks some sentenses as exemplars for specific jmdict words, using a tilde (~) character at the end of the B line item for the word.  See email from Paul Blay posted to the edict-jmdict email list on 2007-06-01: <br/>
  http://tech.groups.yahoo.com/group/edict-jmdict/message/1574<br/>
<br/>
Need to fix exparse,pl to recognise this new syntax and somehow represent this information in the xref records, which are what are used to represent the B line items.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row done">
	<td class="id">67</td>
	
	
	  <td class="title">Add support for "wasei" lsrc attribute</td>
	  <td class="prio">med</td>
	  
	<td class="compld">2007-06-08 20:00</td>
	<td class="entered">2007-06-08 06:18</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="descr" colspan="4">Current thinking is that the "trans" text found in about 500 glosses will become an lsrc attribute ("wasei") rather than a gloss attribute as I anticipated in the previous schema version.  This will be a boolean value.<br/>
<br/>
In previous schema version, lsrc attributes "full" and "part" (partial) were treated like other keywords and coded in table kwlsrc.  However subsequent discussion on the edict-jmdict email list has clarified that these are mutually exclusive, and can be represented by a single boolean value in table lsrc.<br/>
<br/>
See:<br/>
http://tech.groups.yahoo.com/group/edict-jmdict/message/1592<br/>
http://tech.groups.yahoo.com/group/edict-jmdict/message/1607<br/>
<br/>
Since the "part" and "wasei" values are independent, it is awkward to represent them by a single list of keywords as the schema provided for up to now.<br/>
<br/>
Change is to replace the kw column with two boolean columns in table lsrc, remove table kwlsrc, and adjust the code to match.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row done">
	<td class="id">65</td>
	
	
	  <td class="title">display gloss tags following gloss number</td>
	  <td class="prio">med</td>
	  
	<td class="compld">2007-06-08 20:00</td>
	<td class="entered">2007-05-23 14:07</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="descr" colspan="4">Currently in entr.tal and nwconf.tal, a gloss tag (if any) is displayed in square brackets in front of the gloss number, e.g.:<br/>
<br/>
  [lit.] 1. my gloss<br/>
<br/>
It would look better displayed after the gloss number:<br/>
<br/>
  1. [lit.] my gloss<br/>
<br/>
or possibly at the end of the gloss:<br/>
<br/>
  1. my gloss [lit.]
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row done">
	<td class="id">64</td>
	
	
	  <td class="title">xref contraint violation during jmdict load</td>
	  <td class="prio">high</td>
	  
	<td class="compld">2007-05-22 14:30</td>
	<td class="entered">2007-05-22 12:02</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="descr" colspan="4">When loading the jmdict database from jmdict-20070522 via "make", we get the following message when xrefs are resolved:<br/>
<br/>
&gt; psql:xresolv.sql:108: ERROR:  new row for relation "xref" violates check constraint "xref_check"
</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="notes" colspan="4">mktables.sql-1.17 added a reasonable seeming constraint to table xref that disallows any xref where the sorce entry (column entr) and target entry (column xentr) are the same.<br/>
<br/>
This constraint fails on 4 records:<br/>
<br/>
jmdict=# select * from xref where entr=xentr;<br/>
  entr  | sens | xentr  | xsens | typ | notes <br/>
--------+------+--------+-------+-----+-------<br/>
  16957 |    1 |  16957 |     1 |   3 | <br/>
  71531 |    1 |  71531 |     1 |   3 | <br/>
 108835 |    1 | 108835 |     1 |   3 | <br/>
 114013 |    1 | 114013 |     1 |   3 |<br/>
<br/>
The seq numbers of the above entries are:<br/>
 1171620, 1724470, 2111170, 2163660<br/>
<br/>
These seem to be due to jmdict entries that have an xref that refers to the same entry.  I.e. this is not a problem with jmdictdb.<br/>
<br/>
Resolution: <br/>
* Email the jmdict list with request for correction to jmdict.<br/>
* Temporarily remove the constraint, load the data, delete the problem xrefs, and recreate the constraints.<br/>
<br/>
2007-06-09: <br/>
In xresolv.sql-1.8, the sql that loads xref from _xrsv was modified to skip any self-referencing xrefs.  A separate script will be written to detect and report self references.
</td>
	</tr>
      
      </span><span omit-tag="">
      
      
      
      <tr class="row done">
	<td class="id">62</td>
	
	
	  <td class="title">Find tool to help maintain change log / to-do list</td>
	  <td class="prio">high</td>
	  
	<td class="compld">2007-05-22 09:00</td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="descr" colspan="4">Maintaining the change log manually in a text file is not too bad, but the html to-do list is a bear do to the lack of a decent html editor.  NVU: Haven't found good way to cut/paste table rows and it trashes any preexisting html source formatting.  Windows tools like Word or Frontpage write Microsoft flavored html.<br/>
<br/>
Will try to write MS Access app (since I know Access and can do fast).  Since I am only one using it and only the results (change log and to-do list files) will go into the source code the proprietary nature of the tool is irrelevant.  This will change if/when other people contribute.
</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="notes" colspan="4">Done, see comments in task 42, "Bug tracking".
</td>
	</tr>
      
      </span><span omit-tag="">
      
      
      
      <tr class="row done">
	<td class="id">45</td>
	
	
	  <td class="title">Greater than 0 constraints</td>
	  <td class="prio">low</td>
	  
	<td class="compld">2007-05-22 09:00</td>
	<td class="entered">2007-04-30</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="descr" colspan="4">Add constraint to the rdng.rdng, sens.sens, etc, that enforces &gt;0.   Add constraint to xref that prevents entr=xentr.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row done">
	<td class="id">43</td>
	
	
	  <td class="title">Updates for JMdict version 1.06</td>
	  <td class="prio">high</td>
	  
	<td class="compld">2007-05-21 18:00</td>
	<td class="entered">2007-04-30</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="descr" colspan="4">Update for JMdict v1.06 DTD changes (&lt;dial&gt;, &lt;lang&gt;, keyword changes).
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row done">
	<td class="id">44</td>
	
	
	  <td class="title">Gloss tags</td>
	  <td class="prio">med</td>
	  
	<td class="compld">2007-05-21 18:00</td>
	<td class="entered">2007-04-30</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="descr" colspan="4">Add experimental support for gloss tags.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row done">
	<td class="id">42</td>
	
	
	  <td class="title">Bug tracking</td>
	  <td class="prio">info</td>
	  
	<td class="compld">2007-05-21 18:00</td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="descr" colspan="4">Would be better than tracking bugs here.
</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="notes" colspan="4">Created a Microsoft Access database into which I put the per-file change log info that previously was entered into the Changes.txt file and the to-do items.  Both the Changes.txt and TODO.html files are now generated from the database data.  This is not adaquate for multiple contributors but is ok for now for me.
</td>
	</tr>
      
      </span><span omit-tag="">
      
      
      
      <tr class="row done">
	<td class="id">46</td>
	
	
	  <td class="title">Static keyword definitions</td>
	  <td class="prio">high</td>
	  
	<td class="compld">2007-04-14</td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="descr" colspan="4">Use a static include file for at least kw-&gt;id mapping.  Right now, I either use $::KW which requires a database connection (which might not otherwise be needed), or hardwire id numbers in the code which will be impossible to find if the id numbers ever change.
</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="notes" colspan="4">Resolution: <br/>
1. Change the kw table load data files from sql inserts, to csv format.  This allows them to be easily read by other programs.<br/>
2. Write perl/lib/mkkwmod.pl which will read the csv files and generate a perl module file (lib/kwstatic.pm).  The eliminates the need to extract the data from loaded database tables, something problematical in programs whose job is to load the database.<br/>
3. Change loadkw.sql to load from csv file rather than sql inserts.
</td>
	</tr>
      
      </span><span omit-tag="">
      
      
      
      <tr class="row done">
	<td class="id">50</td>
	
	
	  <td class="title">Split jmdict parse process</td>
	  <td class="prio">high</td>
	  
	<td class="compld">2007-03-13</td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="descr" colspan="4">jmparse.pl -- Rearchitect into two pieces:1) parse xml into a EntrList struct, 2) Library code to translate struct to file text.  This will make it easier to write loaders for other input sources.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row done">
	<td class="id">47</td>
	
	
	  <td class="title">Load multiple datasets</td>
	  <td class="prio">high</td>
	  
	<td class="compld">2007-03-13</td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="descr" colspan="4">Support loading multiple datasets into database... Make loading a file to database a two-step process. (1) parse file into intemediate format with rebaseable id numbers. (2) adjust the id numbers as needed while loading the intermediate file into tables.  This allows loading things like jmnedict and the examples file.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row done">
	<td class="id">49</td>
	
	
	  <td class="title">Modify loadjmdict.pl to load jmnedict</td>
	  <td class="prio">med</td>
	  
	<td class="compld">2007-03-10</td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="descr" colspan="4">load_jmdict.pl -- Modify to load jmnedict names data.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row done">
	<td class="id">48</td>
	
	
	  <td class="title">Temp file location option</td>
	  <td class="prio">low</td>
	  
	<td class="compld">2007-03-10</td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="descr" colspan="4">load_jmdict.pl -- Add option to create temp files in some other directory.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row done">
	<td class="id">51</td>
	
	
	  <td class="title">Flatten dupentr function</td>
	  <td class="prio">med</td>
	  
	<td class="compld">2007-03-05</td>
	<td class="entered">2007-02-26</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="descr" colspan="4">mkviews.sql -- Flatten view dupentr.  Currently uses loops and processes an entry as a tree.  But with the pk/fk change of 2007-02-11, we can copy everthing needed by finding it using fk field "entr" and the other fields' values don't need changing, so all the looping no longer needed.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row done">
	<td class="id">52</td>
	
	
	  <td class="title">Reading kanji pri pairs</td>
	  <td class="prio">high</td>
	  
	<td class="compld">2007-02-27</td>
	<td class="entered">2007-02-24</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="descr" colspan="4">Original schema design mistakenly treats ke_pri and re_pri tags as independent.  Most commonly though, they are associated in pairs but schema design does not consider this and duisallows two pri tags on the same domain (e.g. "ichi1" and "ichi2" on the same reading or kanji.<br/>
Some options are:<br/>
<br/>
+ Change PK on rfreq and kfreq tables to include column "value".  This would mimic jmdict xml but the pairing would remain implicit and unnormalized.<br/>
<br/>
+ Add new table with columns [entr,rdng,kanj,kw,value] (pk is first 4 columns) to store only those tags common to both reading and kanji.  Contiinue to use rfreq and kfreq for tags unique to reading and kanji.  Downside is need for union query to get all tags for a given reading or kanji.<br/>
<br/>
+ Use new table with columns [entr,rdng,kanj,kw,value] to keep all pri tags, with reading-only or kanji-only tags indicated by nulls in columns kanj or rdng respectively.  Problem in that such a tavble can't have a natural pk since pk's can't contain nullable columns.  Enforcing a uniqueness contraint with null columns is doable but hackish.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row done">
	<td class="id">58</td>
	
	
	  <td class="title">jmdictxml keyword review</td>
	  <td class="prio">med</td>
	  
	<td class="compld">2007-02-21</td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="descr" colspan="4">Review keywords (jmdict entities) in jmdictxml.pm and the pg/data/kw*.sql files and eliminate those that aren't (supposed to be) in use, eg misc/uK.  If detected in xml file, print warning, use anyway, and don't die.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row done">
	<td class="id">59</td>
	
	
	  <td class="title">Load_jmdict logfile location</td>
	  <td class="prio">low</td>
	  
	<td class="compld">2007-02-20</td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="descr" colspan="4">load_jmdict.pl -- Create skipped_comments log file some place other than current directory (or at lerast allow option) because it shouldn't be included in tar file when making a development snapshot.  Alternatively, automate snapshot creation and exclude skipped* file.<br/>
<br/>
Added a -l option to specify logfile location.  In Makefile, dist target exclude *.log files.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row done">
	<td class="id">57</td>
	
	
	  <td class="title">Automate cgi files install</td>
	  <td class="prio">med</td>
	  
	<td class="compld">2007-02-17</td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="descr" colspan="4">Write a makefile or something to copy the cgi and other file needed by web server to right place.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row done">
	<td class="id">55</td>
	
	
	  <td class="title">Visio replacement</td>
	  <td class="prio">med</td>
	  
	<td class="compld">2007-02-14</td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="descr" colspan="4">Find a replacement for Microsoft Visio for schema diagram.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row done">
	<td class="id">54</td>
	
	
	  <td class="title">Update schema diagram</td>
	  <td class="prio">low</td>
	  
	<td class="compld">2007-02-14</td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="descr" colspan="4">Update schema diagram.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row done">
	<td class="id">60</td>
	
	
	  <td class="title">Lib dir location</td>
	  <td class="prio">high</td>
	  
	<td class="compld">2007-02-12</td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="descr" colspan="4">perl -- Move lib to under cgi?  (This dir needs to be accessible to the cgi scripts when installed in a cgi directory, but should not be accessible via a web server url.  Putting under the cgi dir wouldaccomplish this (at least for Apache, not sure about IIS.))<br/>
<br/>
Don't do. Files in lib/ are used by perl/*.pl scripts as well as the cgi scripts, so moving it under cgi would be inappropriate.  Better way is to use standard Apache/IIS config options to deny access.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row done">
	<td class="id">56</td>
	
	
	  <td class="title">GPL code</td>
	  <td class="prio">high</td>
	  
	<td class="compld">2007-02-12</td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="descr" colspan="4">Put everything under gpl.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row done">
	<td class="id">53</td>
	
	
	  <td class="title">Create deleted entries when parsing jmdict xml</td>
	  <td class="prio">med</td>
	  
	<td class="compld">2007-02-11</td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="descr" colspan="4">load-jmdict.pl -- Process comments about deleted entries and create synthetic "deleted" history records in database.
</td>
	</tr>
      
      
      </span><span omit-tag="">
      
      
      
      <tr class="row done">
	<td class="id">61</td>
	
	
	  <td class="title">Entr.css location</td>
	  <td class="prio">med</td>
	  
	<td class="compld">2007-02-01</td>
	<td class="entered">2007-02-01</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="descr" colspan="4">entr.css -- move out of .cgi -- is inaccessible there on arakawa.<br/>
Or better: read config file giving lib dirs, db info, etc.
</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="notes" colspan="4">Resolution:<br/>
Left in cgi/ in development environment but make Makefile will move to different directory at install time (and update the *.tal files to match.)<br/>
Potential problem: some cgi's write their own html (to create error pages for example).  Currently these don't use any .css but if they did, they would need to adjust location depending on whether they are running from the development directory, or web server cgi directory.
</td>
	</tr>
      
      </span><span omit-tag="">
      
      
      
      <tr class="row done">
	<td class="id">63</td>
	
	
	  <td class="title">Add entry page</td>
	  <td class="prio">high</td>
	  
	<td class="compld">2007-01-27</td>
	<td class="entered">2007-01-27</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="descr" colspan="4">Need cgi page for adding a new entry.
</td>
	</tr>
      <tr class="descr done">
        <td> </td>
	<td class="notes" colspan="4">Used html from Jim Breen's wwwjdict New Submission page, since this is an illustriative test that the database can support at least the sae feature set as wwwjdic.
</td>
	</tr>
      
      </span>
    </table>
  </body>
</html>
