Title:	Speed up LIKE searches
Stat:	open
Disp:	
Prio:	low
Cats:	dev
Reqtrs:	
AssdTo:	stuart@friix.com

2007-08-07 00:00:00 stuart@friix.com
  The search sql generated in srchres.pl for "starts", "contains" and
  "ends" searches use the sql LIKE operator.  The latter two always
  require a full sequential index scan (slow) when executed, but the first
  can use an index (fast).  Although the proper indexes have been set up
  (see task-35), postgresql refuses to use them because the generated sql
  uses a parameter mark and supplies the argument at execute time.  When
  the query is prepared, the planner does not know that the argument value
  is 'xxx%' (which can use index) and not '%xxx' which can't.

2007-08-07 00:00:00 stuart@friix.com
  One way to fix is to embedd the argument in the query text.  Testing
  shows this will use index and runs ~10x faster.  But two problems:
  - The argument value will need to be carefuly escaped since it comes
  from an untrusted source.
  - Will lose the benefit of running a pre-prepared query.
