Title:	Document required Petal patch
Stat:	closed
Disp:	
Prio:	med
Cats:	dev
Reqtrs:	
AssdTo:	stuart@friix.com

2007-09-11 00:00:00 stuart@friix.com
  The "decode" function in PETAL-2.19 contains an error and needs
  to be patched in order for the Perl cgi pages that use it to work
  correctly.  Need to document this.

2008-04-11 17:21:00 stuart@friix.com
  Will use this issue to document patch.  Added reference to this
  patch in the Install/Prereqs section of README.txt. 

  The required patch was given on the PETAL mailing list, in this post:

    http://article.gmane.org/gmane.comp.lang.perl.modules.petal/369

  The relevent file is Petal/Utils/Decode.pm.  Its actual location
  may vary depending on how Petal was installed, but as an example,
  it is found in the following locations on my Fedora Core 6 linux 
  and Windows-2000 machines:

    Fedora: /usr/local/lib/perl5/site_perl/5.8.8/Petal/Utils/Decode.pm
    Windows: C:\Perl\site\lib\Petal\Utils\Decode.pm

  Below is a diff for the patch.  It is simply the addition 
  of a "return undef" at the end of and outside the "while" loop.

  /c/Perl/site/lib/Petal/Utils$ diff -U8 Decode.pm-orig Decode.pm
  --- Decode.pm-orig      2008-04-11 17:30:53.065480000 -0600
  +++ Decode.pm   2007-09-11 21:40:19.148817000 -0600
  @@ -23,16 +23,17 @@
     my $tvar = $class->fetch_arg($hash, shift @tokens);
     use Data::Dumper;
     while(@tokens) {
       my $a = $class->fetch_arg($hash, shift @tokens);
       my $b = $class->fetch_arg($hash, shift @tokens);
       return $a unless defined($b);
       return $b if ($tvar =~ /$a/);
     }
  +  return undef;
   }
  
  
  
   1;

