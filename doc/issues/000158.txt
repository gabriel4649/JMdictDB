Title:	Pass text to edform rather than entry object.
Stat:	done
Disp:	closed
Prio:	med
Cats:	dev
Reqtrs:	
AssdTo:	stuart

2010-04-05 16:31:00 stuart
  Currently, the edit form (cgi/edform.py) receives a serialized
  edit object which it deserializes and passes to the edform TAL
  template, which then picks out pieces of the entry object, 
  formats them as JEL to load into various text boxes.

  It would be better I think, to do the JEL formatting in edform.py
  and have it pass the formatted text to the template.
  1) It would move the formatting into the main code where it is
     easier to debug.
  2) It would allow edform.py to accept text rather than a 
     serialized object, which would make it easier to process
     input from alternate sources.  (E.g. the wwwjdic input 
     form, which now has to be fully parsed so an entry object
     can be produced.  Accepting text would allow edform.py
     to pass it directly to the template for display, where
     even if it were malformed, could edited into correctness.

2010-04-06 20:49:00 stuart
  Modified python/lib/tmpl/edform.tal to look in the passed Entr
  object for attributes .ktxt, .rtxt, and .stxt for the text to 
  use in the corresponding text boxes.  These attributes are
  set in edform.py by jel-formatting the entry's ._kanj, ._rdng,
  and ._sens lists.  A little hackish but it works ok.  Previously,
  the template would run some made-for-tal extension functions on
  the entr object's ._kanj, ._rdng and ._sens lists that would do
  the jel formatting there. 

  This change was commited in rev 2010-04-06 07a86adf6ff1



