Title:	"created" or "amended" in generated xml audit elements
Stat:	closed
Disp:	done
Prio:	med
Cats:	dev
Reqtrs:	
AssdTo:	

2010-07-07 12:26:00 stuart
  In python/entrs2xml.py, when the --jmdict compatibility 
  option is given, entry history records are not reproduced 
  in the xml audit elements; instead each history record is
  represent only by a list of "entry created" or "entry amended"
  audit elements which also contain the history record date.

  Problem is that we can't tell if the first comment of an
  entry should result in an "entry created" or "entry amended"
  xml element.  Entries imported from the jmdict xml file will
  have either no history records, or an "entry created" history.
  Additional history records may be added as entries are 
  subsequently edited.  New entries created after import will
  always have at least one history record, and the first will
  be for the entry's creation.  Discussed this with jwb in
  email "updating feedback" on 2010-04-28.

  Because there is no reliable way to tell in general whether
  the first history record in an entry should be replaced by
  "created" or "amended" in the generated xml, I have been 
  putting "amended" in them all.  However jwb has requested
  more accurate notations a couple of times.

  Need to provide an interim solution so that jwb can produce
  better xml for the distributed jmdict xml file.

  Longer term need to save sufficient information in the database
  so that the xml export functions can generate the right notations
  using only information available in the database.

2010-07-07 12:55:00 stuart
  Interim solution:
  Jwb says that the last imported entry was seq# 2543830 on 
  2010-05-09.  (email, "upcoming work items", "2010-07-06).

  Added additional option, "last-imported" to python/entrs2xml.py
  to allow specifying a sequence number of the last imported 
  entry.  Entries with higher sequence numbers will always 
  have their first history record mapped to "entry created"
  and additional ones mapped to "entry amended".
  Entries with lower seq numbers will have all history records
  mapped to "entry amended" unless the first says, "entry
  created" in which case it is left unchanged.

  The --last-imported option is ignored if --compat is not
  also given.

  If an exported xml file in reloaded into jmdictdb, then
  reexported (with or without --last-import), the resulting
  xml should be identical.

2010-07-07 20:12:00 stuart
  Need to record in the database the fact an entry was imported
  when it's imported which will alieveate the need to for the
  --last-import option.

2010-07-23 13:55:00 stuart
  Done in rev 2010-07-07-ac345b5a7b8d.
