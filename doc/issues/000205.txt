Title:	submission check for duplicate reading
Stat:	closed
Disp:	done
Prio:	med
Cats:	dev
Reqtrs:	
AssdTo:	stuart

2011-08-27 20:48:00 stuart
 Private email from jwb, cc'd responce to Nils Roland Barth
 <jdict.nbarth@xoxy.net>, who requested a check at submission
 time for duplicate reading:

  >> On the JMdictDB entry,
  >> if you accidentally include the same reading twice,
  >> could this be checked and flagged at the confirmation screen?
  >> It currently isnâ€™t flagged, but then when you try to submit,
  >> it fails and you get a cryptic error screen (entry already
  >> exists etc.).

 I suppose same would apply to kanji and gloss

2011-09-04 14:00:00 stuart
 Added dup checks in edconf.check_for_error().  A duplicate might
 not be an exact duplicate (e.g. duplicate will have the same text,
 but might be different in some other way such as have different
 tags or restrictions) so we can't just automatically delete one
 of the duplicates and issue a warning instead.  We could check,
 and do that if all the dups are exact.  (Because we check for
 errors before warnings if some are non-exact, it would be weird
 to get an error about some duplicates while others were not mentioned.) 
 However this seems like more work than I want to do right now so I
 think I prefer just to ask the submitter to correct them.

 Added checks for dulicate kanji, reading or gloss text in edconf.py:
 check_for_errors().  Note that gloss duplicates are checked for per-
 sense and per-language; it's ok to have the same gloss text in 
 different senses or in the same sense if the languages are different.

 I don't think we need to add any checks in edsubmit.py because
 the database integrity checks will catch this at submission time.

