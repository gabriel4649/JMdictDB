Title:	Reorder JMnedict XML elements to match DTD
Stat:	open
Disp:	
Prio:	normal
Cats:	dev
Reqtrs:	jwb
AssdTo:	stuart

2014-10-07 13:27:00 stuart
  On 10/05/2014 11:35 PM, Jim Breen wrote:
  > The first xref has emerged in JMnedict.xml, and xmllint
  > complained:
  > 
  > checking xmlfrag.f25
  > xmltemp:116610: element trans: validity error : Element trans content
  > does not follow the DTD, expecting (name_type* , xref* , trans_det*),
  > got (name_type trans_det xref )
  > </trans>
  >         ^
  > I can see why this has happened. When I extended the JMnedict DTD I put the
  > xref in front of the translation, as in the JMdict one:
  > 
  > JMdict: <!ELEMENT sense (stagk*, stagr*, pos*, xref*, ant*, field*,
  > misc*, s_inf*, lsource*, dial*, gloss*, example*)>
  > 
  > JMnedict: <!ELEMENT trans (name_type*, xref*, trans_det*)>
  > 
  > But they are actually being written after the translation, e.g.
  > 
  > <entry>
  > <ent_seq>5488930</ent_seq>
  > <k_ele>
  > <keb>大海人皇子</keb>
  > </k_ele>
  > <r_ele>
  > <reb>おおあまのおうじ</reb>
  > </r_ele>
  > <trans>
  > <name_type>&person;</name_type>
  > <trans_det>Emperor Temmu (?-686 CE, reigning: 673-686 CE)</trans_det>
  > <xref>天武天皇</xref>
  > </trans>
  > </entry>
  > 
  > I can fix this by altering the DTD, but it's probably giving us a
  > bit of inconsistency between the two dictionaries.

2014-10-07 13:49:00 stuart
  In python/lib/fmtxml.py, moved the code that generates the xrefs from
  after the trans_det code to before it.

