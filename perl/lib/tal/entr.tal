<html xmlns:tal="http://purl.org/petal/1.0/">
<!--? Copyright (c) 2007 Stuart McGraw -->
<!--? $Revision$ $Date$ -->
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link rel="stylesheet" type="text/css" href="entr.css"/>
  <title>JMdict</title>
</head>
<body>
  <h1>JMdict Database Entries</h1>
  <span tal:repeat="e entries">
    <div class="entry">
      Seq: <span tal:replace="e/seq">seqnum</span>
	(<span tal:replace="kwabbr: 'SRC' e/src">src</span>)
      <span class="status" tal:if="not:eq: string:2 e/stat">
        [<span tal:replace="kwfull: 'STAT' e/stat">[status]</span>]
	</span>
      <span class="pkid">{id:<span tal:replace="e/id"/>}</span>
      <span class="dial" tal:condition="e/_dial">, 
        Dialect: <span tal:replace="kwabbrs: 'DIAL' ',' e/_dial">dial</span>
	</span>
      <span class="lang" tal:if="e/_lang">, 
	Original lang: <span tal:replace="kwabbrs: 'LANG' ',' e/_lang">lang</span>
	</span>

      <br/> 
      <span tal:if="e/_kanj" tal:repeat="k e/_kanj" tal:omit-tag="">
	<span tal:condition="not:repeat/start" tal:omit-tag="">； </span>
	<span class="kanj" tal:content="k/txt">kanji text</span>
	<span class="kattrs" tal:if="or:k/_kinf k/_kfreq">
	  [<span class="kinf" tal:if="k/_kinf" tal:content="kwabbrs: 'KINF' ',' k/_kinf">kinf</span>
	   <span tal:if="and: k/_kinf k/_kfreq" tal:replace="string:/">/</span>
	   <span class="kfreq" tal:if="k/_kfreq" tal:content="freqs: ',' k/_kfreq">kfreq</span>]
	  </span>
	</span>

      <br tal:if="true:e/HAS_RESTR"/>
      <span tal:if="and: e/_kanj e/_rdng" tal:omit-tag="">【</span>
      <span tal:repeat="r e/_rdng">
	<span tal:condition="not:repeat/start" tal:omit-tag="">； </span>
	<span class="rdng" tal:content="r/txt">reading text</span>
	<span class="restr" tal:if="true:/r/_RESTR">(
	  <span tal:if="eq: string:1 r/_RESTR" tal:omit-tag="">no kanji</span>
	  <span tal:if="not:eq: string:1 r/_RESTR" tal:omit-tag="">
	    <span tal:repeat="z r/_RESTR" tal:omit-tag="">
	      <span tal:if="not:repeat/start" tal:omit-tag="">,</span>
	      <span tal:replace="z"/>
	      </span>
	    </span>)
	  </span>
	<span class="rattrs" tal:if="or:r/_rinf r/_rfreq">
	  [<span class="rinf" tal:if="r/_rinf" tal:content="kwabbrs: 'RINF' ',' r/_rinf">rinf</span>
	  <span tal:if="and: r/_rinf r/_rfreq" tal:replace="string:/">/</span>
	  <span class="rfreq" tal:if="r/_rfreq" tal:content="freqs: ',' r/_rfreq">rfreq</span>]
	  </span>
	</span>
      <span tal:if="and: e/_kanj e/_rdng" tal:omit-tag="">】</span>

      <table class="senses" border="0">
	<tr class="sense" tal:repeat="s e/_sens">
	  <td valign="top" tal:content="string:${s/sens}.">n.</td>
	  <td colspan="2">
	    <span class="stag" tal:if="s/_STAG">
	      (<span tal:if="s/_STAG" tal:repeat="z s/_STAG" tal:omit-tag="">
		<span tal:if="not:repeat/start" tal:omit-tag="">,</span>
		<span tal:replace="z" tal:omit-tag="">stag-restr</span>
		</span> only)
	      </span>
	    <span class="pos" tal:if="s/_pos">
	      [<span tal:replace="kwabbrs: 'POS' ',' s/_pos">pos</pos>]
	      </span>
	    <span class="misc" tal:if="s/_misc">
	      [<span tal:replace="kwabbrs: 'MISC' ',' s/_misc">misc</span>]
	      </span>
	    <span class="fld" tal:if="s/_fld">
	      {<span tal:replace="kwfulls: 'FLD' ',' s/_fld">fields</span>}
	      </span><br/>

	    <span class="note" tal:if="s/notes">
	      《<span tal:replace="s/notes">sense-notes</span>》<br/>
	      </span>

	    <span tal:repeat="g s/_gloss">
	      <span tal:if="not: eq: g/lang string:1" omit-tag="">
	        <span class="glang" tal:replace="kwabbr: 'LANG' g/lang">lang</span>:
		</span>
	      <span class="gloss" tal:replace="string:${g/gloss}. ${g/txt}">n. gloss text</span><br/>
	      </span>
	    <table class="xrefs" tal:if="or: true:s/_erefs true:s/_erers">
	      <tr tal:if="true:s/_erefs">
		<td colspan="2">Cross references:</td>   
	        </tr>
	      <tr tal:if="true:s/_erefs" tal:repeat="x s/_erefs">
		<td>&nbsp;</td>
		<td>
		  <span tal:replace="kwabbr: 'XREF' x/typ">xref-type</span>:
		  <a tal:attributes="href string:entr.pl?e=${x/entr/eid}" tal:content="x/entr/seq">seq-num</a>
		  <span tal:if="gt: x/entr/nsens string:1">
		    (<span tal:replace="join: ',' x/sens">senses</span>)</span>
		  <span tal:replace="x/entr/kanj">xref-kanj</span>
		  <span tal:if="and: x/entr/kanj x/entr/rdng" tal:omit-tag="">【</span>
		  <span tal:replace="x/entr/rdng">xref-rdng</span>
		  <span tal:if="and: x/entr/kanj x/entr/rdng" tal:omit-tag="">】</span>
		  <span tal:replace="x/entr/gloss"></span>
		  <span tal:if="x/notes" replace="x/notes">xref-note</span>
		  </td>
		</tr>
	      <tr tal:if="true:s/_erers">
		<td colspan="2">Reverse references:</td>
		</tr>
	      <tr tal:if="true:s/_erers" tal:repeat="x s/_erers">
		<td>&nbsp;</td>
		<td>
		  <span tal:replace="kwabbr: 'XREF' x/typ">xref-type</span>:
		  <a tal:attributes="href string:entr.pl?e=${x/entr/eid}" tal:content="x/entr/seq">seq-num</a>
		  <span tal:if="gt: x/entr/nsens string:1">
		    (<span tal:replace="join: ',' x/sens">senses</span>)</span>
		  <span tal:replace="x/entr/kanj">xref-kanj</span>
		  <span tal:if="and: x/entr/kanj x/entr/rdng" tal:omit-tag="">【</span>
		  <span tal:replace="x/entr/rdng">xref-rdng</span>
		  <span tal:if="and: x/entr/kanj x/entr/rdng" tal:omit-tag="">】</span>
		  <span tal:replace="x/entr/gloss">gloss</span>
		  <span tal:if="x/notes" replace="x/notes">xref-note</span>
		  </td>
		</tr>
	      </table>
	    </td>
	  </tr>
	</table>

      <span tal:if="e/HAS_AUDIO" tal:omit-tag="">Audio:
	<dl>
	  <span tal:repeat="r e/_rdng" tal:omit-tag="">
	    <span tal:if="true:r/_audio" tal:omit-tag="">
	      <dt tal:content="r/txt">reading-text</dt>
	      <dd tal:repeat="a r/_audio">
		<a tal:attributes="href string:noaudio.html" tal:content="a/fname">filename</a>
		<span tal:replace="string:(${a/strt}:${a/leng})">(start:length)</span>
		</dd>
	      </span>
	    </span>
	  </dl>
	</span>

      <span tal:if="e/_hist" tal:omit-tag="">History:
	<ol>
	  <li tal:repeat="h e/_hist">
	      <span class="hhdr" tal:replace="string: ${kwabbr:'STAT' h/stat} ${h/dt} ${h/who}">hist-header</span>
	      <pre class="hnotes" tal:if="h/notes" tal:content="h/notes">hist-notes</pre>
	    </li>
	  </ol>
	</span>

      </div>
    </span>
  <div class="debug" tal:if="true:dbg">
    <span tal:repeat="d h2l: dbg">
      <span tal:replace="d/key">key</span>: <span tal:replace="d/val">value</span><br/>
      </span>
    </div>
  </body>
</html>
